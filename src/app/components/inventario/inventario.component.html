

<div class="Buscar">
  <table>
    <tr>
      <td>
        <div class="input-field col s6">
          <i class="material-icons prefix">search</i>
          <input id="icon_prefix" type="text" class="active" [(ngModel)]="producto.idProducto" name="busqueda" >
          <label for="icon_prefix">Search by code</label>
        </div>
      </td>
      <td>
        <a class="waves-effect waves-light btn" (click)="buscarProducto(producto.idProducto)">Search</a>
      </td>
    </tr>
    <tr>
      <div class="crearProducto">
        <a class="waves-effect waves-light btn modal-trigger" data-target="crearProducto" (click)="openCrearProducto()" ><i class="material-icons left">add</i>New product</a>
      </div>
    </tr>
  </table>
</div>




<div class="contenedor">    
  <span class="titulo">
    modify products
  </span>
    <table class="default" *ngIf="productos != undefined">
      <tr>
        <td>Barcode</td>
        <td>Name</td>
        <td>Stock</td>
        <td>Price</td>
        <td>Actions</td>
      </tr>
      <tr *ngFor="let producto of productos">
        <td>{{producto.idProducto}}</td>
        <td>{{producto.nombre}}</td>
        <td>{{producto.stock}}</td>
        <td>{{producto.precio}}</td>
        <td><a class="modal-trigger" data-target="modal1"  (click)="modificarProducto(producto.idProducto)"><i class="material-icons">edit</i></a></td>
        <td>   <a (click)="eliminarProducto(producto.idProducto)"><i class="material-icons">delete</i></a></td>
      </tr>
    </table>
</div>


<div id="modal1" class="modal">
  <div class="modal-content">
  <div class="row">
    <form class="col s12">
      <div class="titulo">
        <span>Modify product data</span>
      </div>
      <div class="row">
        <div class="input-field col s6">
            <i class="material-icons prefix">info</i>
            <input id="code" type="text" class="validate" [(ngModel)]="producto.idProducto" name="idProducto">
            <label for="code" class="active">Barcode</label>
        </div>
        
    </div>
      <div class="row">
        <div class="input-field col s6">
          <i class="material-icons prefix">info</i>
          <input  id="name" type="text" class="validate" placeholder="producto.nombre" [(ngModel)]="producto.nombre" name="Nombre">
          <label for="name" class="active"> Product name</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s6">
          <i class="material-icons prefix">info</i>
          <input  id="name" type="text" class="validate"  [(ngModel)]="producto.precio" name="Precio">
          <label for="name" class="active"> Price</label>
        </div>

        <div class="input-field col s6">

          <input  id="name" type="text" class="validate" [(ngModel)]="producto.stock" name="Cantidad">
          <label for="name" class="active"> Quantity</label>
        </div>
      </div>

      <div class="row">
        <div class="input-field col s6">
          <i class="material-icons prefix">percent</i>
          <input  id="name" type="text" class="validate" [(ngModel)]="producto.descuento" name="descuento">
          <label for="name" class="active"> Discount</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s6">
          <i class="material-icons prefix">info</i>
          <label for="name" class="active" > Discount start</label>
          <input type="text" class="datepicker" id="inicio_descuento" [(ngModel)]="producto.inicio_descuento" name="inicio_descuento">
          
          <!--<input [(ngModel)]="producto.inicio_descuento" type="text" id="fechaIni" #fechaI
              name="fecha1" (change)="modificarFechaInicio(fechaI.value)" class="datepicker">-->
        </div>

        <div class="input-field col s6">
          <i class="material-icons prefix">info</i>
          <label for="name" class="active"> Discount end</label>
          <input type="text" class="datepicker" id="fin_descuento"  [(ngModel)]="producto.fin_descuento" name="fin_descuento" >
        </div>
      </div>
      <div class="row">
        <div>
          <select [(ngModel)]='producto.idCategoria' class="browser-default" name="categorias">
            <option *ngFor="let categoria of categorias" [value]="categoria.idCategoria">
            {{categoria.nombre}}
            </option>
          </select>
        </div>
        <select [(ngModel)]='producto.idMaterial' class="browser-default" name="materiales">
          <option *ngFor="let material of materiales" [value]="material.idMaterial">
          {{material.nombre}}
          </option>
        </select>
        <div>
          <select [(ngModel)]='producto.idMarca' class="browser-default" name="marcas">
            <option *ngFor="let marca of marcas" [value]="marca.idMarca">
            {{marca.nombre}}
            </option>
          </select>
        </div>
        <div>
        </div>
    </div>
    </form>
  </div>
  </div>   
  <div class="modal-footer">
    <a  class="modal-close waves-effect waves-green btn-flat" (click)="guardarProducto()">Save data</a>
    <a  class="modal-close waves-effect waves-green btn-flat" >Cancel </a>
  </div>     
</div>


<div id="crearProducto" class="modal">
  <div class="modal-content">
  <div class="row">
    <form class="col s12">
      <div class="titulo">
        <span>Add a new product</span>
      </div>
      <div class="row">
        <div class="input-field col s6">
            <i class="material-icons prefix">info</i>
            <input id="code" type="text" class="validate" [(ngModel)]="producto.idProducto" name="idProducto">
            <label for="code" class="active">barcode</label>
        </div>
        
    </div>
      <div class="row">
        <div class="input-field col s6">
          <i class="material-icons prefix">info</i>
          <input  id="name" type="text" class="validate" placeholder="producto.nombre" [(ngModel)]="producto.nombre" name="Nombre">
          <label for="name" class="active"> Product name</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s6">
          <i class="material-icons prefix">info</i>
          <input  id="name" type="text" class="validate"  [(ngModel)]="producto.precio" name="Precio">
          <label for="name" class="active"> price</label>
        </div>

        <div class="input-field col s6">

          <input  id="name" type="text" class="validate" [(ngModel)]="producto.stock" name="Cantidad">
          <label for="name" class="active"> Quantity</label>
        </div>
      </div>

      <div class="row">
        <div class="input-field col s6">
          <i class="material-icons prefix">percent</i>
          <input  id="name" type="text" class="validate" [(ngModel)]="producto.descuento" name="descuento">
          <label for="name" class="active"> Discount</label>
        </div>
      </div>
      <div class="row">
        <div class="input-field col s6">
          <i class="material-icons prefix">info</i>

          <label for="name" class="active">  Discount start</label>
          <input type="date" class="datepicker" id="inicio_descuento" [(ngModel)]="producto.inicio_descuento" name="inicio_descuento" >
        </div>

        <div class="input-field col s6">
          <i class="material-icons prefix">info</i>
          <label for="name" class="active">  Discount end</label>
          <input type="date" class="datepicker" id="fin_descuento"  [(ngModel)]="producto.fin_descuento" name="fin_descuento" >
        </div>
      </div>
        <div class="row">
            <div>
              <select [(ngModel)]='producto.idCategoria' class="browser-default" name="categorias">
                <option *ngFor="let categoriaItem of categorias" [value]="categoriaItem.idCategoria" >
                  {{categoriaItem.nombre}}
                </option>
              </select>
              
            </div>
            <select [(ngModel)]='producto.idMaterial' class="browser-default" name="materiales">
              <option for="materiales" *ngFor="let material of materiales" [value]="material.idMaterial">
              {{material.nombre}}
              </option>
            </select>
            <div>
              <select [(ngModel)]='producto.idMarca' class="browser-default" name="marcas">
                <option *ngFor="let marca of marcas" [value]="marca.idMarca">
                {{marca.nombre}}
                </option>
              </select>
            </div>
            <div>

            </div>
        </div>
    </form>
  </div>
  </div>   
  <div class="modal-footer">
    <a  class="modal-close waves-effect waves-green btn-flat" (click)="crearProducto()">Save data</a>
    <a  class="modal-close waves-effect waves-green btn-flat" >Cancel </a>
  </div>     
</div>
      